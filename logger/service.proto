syntax = "proto3";

package logger;

message Client {
  string pID = 1;
  string sID = 2;
}

message User {
  message GeoIP {
    string IP = 1;
    string country = 2;
    string city = 3;
  }

  string sessID = 1;
  string path = 2;
  bool adblocker = 3;
  string uID = 4;
  string puID = 5;
  string user_agent = 6;
  string device = 7;
  string domain = 8;
  uint64 page_load_time = 9;
  GeoIP location = 10;
}

message Pair {
  string key = 1;
  string value = 2;
}

service Logger {
  rpc Event (EventRequest) returns (EventResponse) {}
  rpc Error (ErrorRequest) returns (ErrorResponse) {}
}

message EventRequest {
  Client client = 1;
  User user = 2;
  repeated Pair custom = 3;
}

message EventResponse { }

message ErrorRequest {
  uint32 error_code = 1;
  Client client = 2;
  User user = 3;
  repeated Pair custom = 4;
}

message ErrorResponse { }
